webpackJsonp([8],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("router-view")],1)],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App"},a,!1,function(e){n("q/an")},null,null).exports,r=n("/ocq"),c=n("//Fk"),u=n.n(c),s=n("mtWM"),l=n.n(s),d=n("NYxO"),m={SET_NAME:function(e,t){e.name=t},SET_TOKEN:function(e,t){e.token=t}},p={cookie:{set:function(e,t){if(window.localStorage)localStorage.removeItem(e),localStorage.setItem(e,t);else{var n=new Date;n.setTime(n.getTime()+2592e3),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()}},delete:function(e){if(window.localStorage)localStorage.removeItem(e);else{var t=new Date;t.setTime(t.getTime()-1);var n=getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())}},get:function(e){if(window.localStorage){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return n=localStorage.getItem(e)}var n;t=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(n=document.cookie.match(t))?unescape(n[2]):null}}},f={login:function(e,t){var n=e.commit;return new u.a(function(e,a){o.a.prototype.$ajax({url:"/login",method:"POST",data:{username:t.username,password:t.password}}).then(function(t){var o=t.data;p.cookie.set("token",o.token),p.cookie.set("name",o.name),n("SET_TOKEN",o.token),n("SET_NAME",o.name),e()}).catch(function(e){a(e)})})},logOut:function(e){var t=e.commit,n=e.state;return new u.a(function(e,a){o.a.prototype.$ajax({url:"/logout",method:"POST",data:{token:n.token}}).then(function(){t("SET_TOKEN",""),p.cookie.delete("token"),e()}).catch(function(e){a(e)})})}},h=n("UjVw"),v=n.n(h);o.a.use(d.a);var g=new d.a.Store({state:{token:"",name:""},getters:v.a,actions:f,mutations:m}),w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"toast"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.isShowToast,expression:"isShowToast"}],staticClass:"lt-toast",attrs:{id:"toast-box"}},[t("p",[this._v(this._s(this.content))])])])},staticRenderFns:[]};var E=n("VU/8")(null,w,!1,function(e){n("wZQB")},null,null).exports,k=l.a.create({baseURL:"http://rap2api.taobao.org/app/mock/116731",timeout:5e3});k.interceptors.request.use(function(e){return e.headers.token=g.state.token||p.cookie.get("token"),e},function(e){console.log(e),u.a.reject(e)}),k.interceptors.response.use(function(e){var t=e.data;return 1!==t.code?(1002===t.code?(o.a.prototype.$toast("请重新登录"),g.dispatch("logout").then(function(){location.reload()})):o.a.prototype.$toast(t.message),u.a.reject("error")):t},function(e){return o.a.prototype.$toast(e.message),u.a.reject(e)});var T={install:function(e){e.prototype.$ajax=k;var t="",n="";e.prototype.$toast=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"系统繁忙,请重试",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;if(n&&clearTimeout(n),""==t){var i=e.extend(E);t=new i({data:{content:o,isShowToast:!0}}),document.body.appendChild(t.$mount().$el)}else t.isShowToast=!0,t.content=o;n=setTimeout(function(){t.isShowToast=!1},a)}}};o.a.use(T),o.a.use(r.a);var S=new r.a({routes:[{path:"",redirect:"/index"},{path:"/index",name:"index",component:function(e){return Promise.all([n.e(0),n.e(1)]).then(function(){return e(n("Qt9A"))}.bind(null,n)).catch(n.oe)}},{path:"/list/:type",name:"list",component:function(e){return n.e(3).then(function(){return e(n("wpRo"))}.bind(null,n)).catch(n.oe)}},{path:"/detail/:id",name:"detail",component:function(e){return n.e(4).then(function(){return e(n("OtD6"))}.bind(null,n)).catch(n.oe)}},{path:"/login",name:"login",component:function(e){return n.e(6).then(function(){return e(n("QlWu"))}.bind(null,n)).catch(n.oe)}},{path:"/journey",name:"journey",component:function(e){return Promise.all([n.e(0),n.e(5)]).then(function(){return e(n("lIE8"))}.bind(null,n)).catch(n.oe)},meta:{requiresAuth:!0}},{path:"/user",name:"user",component:function(e){return Promise.all([n.e(0),n.e(2)]).then(function(){return e(n("2AnY"))}.bind(null,n)).catch(n.oe)},meta:{requiresAuth:!0}}]});S.beforeEach(function(e,t,n){e.matched.some(function(e){return e.meta.requiresAuth})?p.cookie.get("token")?g.state.token?n():(g.commit("SET_NAME",p.cookie.get("name")),g.commit("SET_TOKEN",p.cookie.get("token")),n()):n({path:"/login",query:{redirect:e.fullPath}}):n()});var b=S,x=n("bqTm"),y=n.n(x),j=n("cTzj"),_=n.n(j),O=n("v5o6"),$=n.n(O);n("mO+Z"),o.a.filter("filter",function(e){}),o.a.directive("number",{bind:function(e){e.handler=function(){e.value=e.value.replace(/\D+/,"")},e.addEventListener("input",e.handler)},unbind:function(){el.removeEventListener("input",el.handler)}}),o.a.directive("focus",{inserted:function(e){e.focus()}});o.a.config.productionTip=!1,"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){$.a.attach(document.body)},!1),o.a.use(_.a,{preLoad:1.3,error:n("j50F"),loading:n("j50F"),attempt:3,listenEvents:["scroll"]}),o.a.use(y.a),o.a.use(T),new o.a({el:"#app",router:b,store:g,components:{App:i},template:"<App/>"})},UjVw:function(e,t){},j50F:function(e,t,n){e.exports=n.p+"static/img/default-img.b3c3fda.png"},"mO+Z":function(e,t){!function(e,t){var n=t.documentElement,o=e.devicePixelRatio||1;function a(){var e=n.clientWidth/10;n.style.fontSize=e+"px"}if(a(),e.addEventListener("resize",a),e.addEventListener("pageshow",function(e){e.persisted&&a()}),o>=2){var i=t.createElement("body"),r=t.createElement("div");r.style.border=".5px solid transparent",i.appendChild(r),n.appendChild(i),1===r.offsetHeight&&n.classList.add("hairlines"),n.removeChild(i)}}(window,document)},"q/an":function(e,t){},wZQB:function(e,t){}},["NHnr"]);